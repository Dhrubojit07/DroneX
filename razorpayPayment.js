import{updateCartPrices}from"./calculatePrices.js";export const initializeRazorpay=()=>new Promise((e=>{const o=document.createElement("script");o.src="https://checkout.razorpay.com/v1/checkout.js",o.onload=()=>{e(window.Razorpay)},o.onerror=()=>{e(null)},document.body.appendChild(o)}));export const handleRazorpayPayment=async()=>{const e=document.querySelector(".productFinalTotal"),o=parseFloat(e.textContent.replace(/[^0-9.-]+/g,"")),t={key:"rzp_test_J01Kbh9xdN0yoU",amount:Math.round(100*o),currency:"INR",name:"DroneX Store",description:"Drone Purchase",image:"/images/logo.png",handler:function(e){alert(`Payment ID: ${e.razorpay_payment_id}`),localStorage.removeItem("cartProductLS"),updateCartPrices()},prefill:{name:"Test User",email:"test@dronex.com",contact:"9999999999"},theme:{color:"#3399cc"}};new Razorpay(t).open()};document.addEventListener("DOMContentLoaded",(async()=>{await new Promise((e=>{const o=document.createElement("script");o.src="https://checkout.razorpay.com/v1/checkout.js",o.onload=()=>{e(window.Razorpay)},o.onerror=()=>{e(null)},document.body.appendChild(o)}))?document.querySelector(".razorpay-payment-button").addEventListener("click",(()=>{updateCartPrices(),handleRazorpayPayment()})):console.error("Razorpay failed to load")}));